<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Shayna Dunkelman</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&family=Space+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-void: #0a0a0a;
            --text-primary: #f5f5f5;
            --text-secondary: #999;
            --text-muted: #555;
            --accent-violet: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-void);
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* ====== BACKGROUND TEXTURE ====== */
        .texture-layer {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 1;
        }

        .noise {
            position: absolute;
            inset: -20%;
            width: 140%;
            height: 140%;
            opacity: 0.06;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            will-change: transform;
            transition: transform 0.15s ease-out;
        }

        .wash {
            position: absolute;
            inset: 0;
            background: radial-gradient(
                ellipse 80% 60% at 50% 30%,
                rgba(139, 92, 246, 0.04) 0%,
                transparent 70%
            );
            will-change: transform;
            transition: transform 0.2s ease-out;
        }

        /* ====== PHOTO LAYER ====== */
        .photo-layer {
            position: fixed;
            inset: 0;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            will-change: transform, opacity;
            transition: transform 0.15s ease-out;
        }

        .photo-container {
            width: min(400px, 80vw);
            height: min(550px, 75vh);
            position: relative;
        }

        .photo-frame {
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 3px;
        }

        .photo-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(175deg, #151515 0%, #1f1f1f 50%, #141414 100%);
            position: relative;
        }

        .photo-placeholder::after {
            content: '';
            position: absolute;
            top: 12%;
            left: 50%;
            transform: translateX(-50%);
            width: 45%;
            height: 50%;
            background: radial-gradient(
                ellipse 100% 100% at 50% 25%,
                rgba(255,255,255,0.035) 0%,
                transparent 70%
            );
            border-radius: 45% 45% 42% 42%;
        }

        .photo-fade-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60%;
            background: linear-gradient(to top, var(--bg-void) 0%, transparent 100%);
            pointer-events: none;
        }

        .photo-fade-top {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30%;
            background: linear-gradient(to bottom, rgba(10,10,10,0.4) 0%, transparent 100%);
            pointer-events: none;
        }

        /* ====== NAVIGATION ====== */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 24px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        /* Placeholder for name when it locks */
        .logo-placeholder {
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.02em;
            opacity: 0;
            visibility: hidden;
        }

        .nav-links {
            display: flex;
            gap: 32px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .nav-links.visible {
            opacity: 1;
        }

        .nav-links a {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        /* ====== THE NAME (animated element) ====== */
        .name {
            position: fixed;
            z-index: 101;
            font-weight: 300;
            letter-spacing: 0.01em;
            line-height: 1.1;
            text-shadow: 0 4px 40px rgba(0,0,0,0.8);
            white-space: nowrap;
            will-change: transform, font-size, left, top;
            /* Starting state - centered */
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(32px, 8vw, 64px);
        }

        .name.locked {
            text-shadow: none;
        }

        /* ====== SCROLL CONTAINER ====== */
        .scroll-container {
            position: relative;
            z-index: 10;
        }

        .threshold-spacer {
            height: 100vh;
            height: 100dvh;
        }

        /* Scroll hint */
        .scroll-hint {
            position: fixed;
            bottom: 36px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            opacity: 0.4;
            z-index: 50;
            transition: opacity 0.3s ease;
        }

        .scroll-hint span {
            font-family: 'Space Mono', monospace;
            font-size: 9px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-muted);
        }

        .scroll-line {
            width: 1px;
            height: 36px;
            background: linear-gradient(180deg, var(--text-muted) 0%, transparent 100%);
            position: relative;
        }

        .scroll-line::after {
            content: '';
            position: absolute;
            top: 0;
            left: -1.5px;
            width: 4px;
            height: 4px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: scrollDot 2s ease-in-out infinite;
        }

        @keyframes scrollDot {
            0%, 100% { transform: translateY(0); opacity: 0.8; }
            100% { transform: translateY(36px); opacity: 0; }
        }

        /* ====== CONTENT ====== */
        .content {
            position: relative;
            background: var(--bg-void);
            padding: 0 40px 120px;
        }

        .content::before {
            content: '';
            position: absolute;
            top: -150px;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(to bottom, transparent 0%, var(--bg-void) 100%);
            pointer-events: none;
        }

        .content-inner {
            max-width: 720px;
            margin: 0 auto;
            position: relative;
        }

        .bio {
            padding-top: 40px;
        }

        .bio p {
            font-size: clamp(16px, 2.5vw, 19px);
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 28px;
        }

        .bio p:first-child {
            font-size: clamp(18px, 3vw, 24px);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* ====== SPEC PANEL ====== */
        .spec-toggle {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 40px;
            height: 40px;
            background: var(--accent-violet);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-family: 'Space Mono', monospace;
            font-size: 14px;
            z-index: 1001;
            transition: transform 0.2s ease;
        }

        .spec-toggle:hover {
            transform: scale(1.1);
        }

        .spec-panel {
            position: fixed;
            right: 0;
            top: 0;
            bottom: 0;
            width: min(380px, 90vw);
            background: #fff;
            color: #1a1a1a;
            padding: 28px;
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .spec-panel.open {
            transform: translateX(0);
        }

        .spec-panel h2 {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .spec-subtitle {
            font-family: 'Space Mono', monospace;
            font-size: 9px;
            color: #888;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-bottom: 24px;
            padding-bottom: 14px;
            border-bottom: 1px solid #eee;
        }

        .spec-section {
            margin-bottom: 20px;
        }

        .spec-label {
            font-family: 'Space Mono', monospace;
            font-size: 9px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--accent-violet);
            margin-bottom: 6px;
        }

        .spec-content {
            font-size: 12px;
            line-height: 1.7;
            color: #555;
        }

        /* ====== MOBILE ====== */
        @media (max-width: 768px) {
            nav {
                padding: 20px 24px;
            }

            .nav-links {
                gap: 20px;
            }

            .nav-links a {
                font-size: 9px;
            }

            .content {
                padding: 0 24px 80px;
            }

            .scroll-hint {
                bottom: 28px;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>

    <!-- Background Texture -->
    <div class="texture-layer">
        <div class="noise" id="noise"></div>
        <div class="wash" id="wash"></div>
    </div>

    <!-- Photo Layer -->
    <div class="photo-layer" id="photoLayer">
        <div class="photo-container">
            <div class="photo-frame">
                <div class="photo-placeholder"></div>
                <div class="photo-fade-top"></div>
                <div class="photo-fade-bottom"></div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="nav">
        <div class="logo-placeholder">Shayna Dunkelman</div>
        <div class="nav-links" id="navLinks">
            <a href="#">Work</a>
            <a href="#">About</a>
            <a href="#">Press</a>
            <a href="#">Contact</a>
        </div>
    </nav>

    <!-- The Name (animates from center to nav) -->
    <h1 class="name" id="name">Shayna Dunkelman</h1>

    <!-- Scroll Hint -->
    <div class="scroll-hint" id="scrollHint">
        <span>Scroll</span>
        <div class="scroll-line"></div>
    </div>

    <!-- Scrollable Content -->
    <div class="scroll-container">
        <div class="threshold-spacer"></div>

        <section class="content">
            <div class="content-inner">
                <div class="bio">
                    <p>Musician, percussionist, and electronic artist based in Brooklyn, NY.</p>
                    <p>Known for versatile and unique techniques, and use of electronics to access a sonic palette not found in acoustic percussion. Her work spans avant-garde composition, experimental rock, and collaborative performance.</p>
                    <p>In addition to solo performances, she tours with Balún, Emily Wells, Peptalk, Ali Sethi, and her percussion duo NOMON with her sister Nava Dunkelman. She has performed at Carnegie Hall, Lincoln Center, The MET, and venues worldwide.</p>
                    <p>Notable collaborations include work with John Zorn, Yoko Ono, Thurston Moore, David Lynch, and six years as a member of Xiu Xiu. She holds degrees in music and mathematics from Mills College.</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Spec Panel -->
    <button class="spec-toggle" id="specToggle">?</button>
    <aside class="spec-panel" id="specPanel">
        <h2>Threshold v5</h2>
        <div class="spec-subtitle">Name → Logo Transition</div>

        <div class="spec-section">
            <div class="spec-label">The Journey</div>
            <div class="spec-content">
                <strong>Phase 1 (0-85vh):</strong> Name rises with scroll, stays large. Photo responds to cursor/gyro.<br><br>
                <strong>Phase 2 (85-140vh):</strong> Name shrinks and slides to top-left.<br><br>
                <strong>Phase 3 (140vh+):</strong> Name locks into nav position as logo. Stays fixed.
            </div>
        </div>

        <div class="spec-section">
            <div class="spec-label">Animation Properties</div>
            <div class="spec-content">
                • Position: center → top-left<br>
                • Font size: 64px → 14px<br>
                • Transform origin: center → left<br>
                • Easing: ease-out (smooth decel)
            </div>
        </div>

        <div class="spec-section">
            <div class="spec-label">Parallax</div>
            <div class="spec-content">
                • Photo: 0.4x scroll speed<br>
                • Texture: responds to cursor/gyro<br>
                • Name: custom scroll-linked animation
            </div>
        </div>

        <div class="spec-section">
            <div class="spec-label">Mobile</div>
            <div class="spec-content">
                Same behavior. Gyro enabled on first touch. Name transition works identically.
            </div>
        </div>
    </aside>

    <script>
        const noise = document.getElementById('noise');
        const wash = document.getElementById('wash');
        const photoLayer = document.getElementById('photoLayer');
        const name = document.getElementById('name');
        const navLinks = document.getElementById('navLinks');
        const scrollHint = document.getElementById('scrollHint');
        const specPanel = document.getElementById('specPanel');
        const specToggle = document.getElementById('specToggle');

        // Cursor/gyro state
        let targetX = 0.5;
        let targetY = 0.5;
        let currentX = 0.5;
        let currentY = 0.5;
        let gyroEnabled = false;
        let gyroRequested = false;

        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        // Animation values
        const TEXTURE_MOVE = 12;
        const PHOTO_MOVE = 25;

        // Name animation keyframes
        const NAME_START_SIZE = Math.min(64, window.innerWidth * 0.08);
        const NAME_END_SIZE = 14;
        const NAME_START_Y = window.innerHeight * 0.5;
        const NAME_END_Y = 24; // nav padding
        const NAME_START_X = window.innerWidth * 0.5;
        const NAME_END_X = 40; // nav padding

        // Scroll thresholds
        const SCROLL_PHASE1_END = window.innerHeight * 0.85;  // Name starts moving
        const SCROLL_PHASE2_END = window.innerHeight * 1.4;   // Name locks

        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }

        function lerp(start, end, t) {
            return start + (end - start) * t;
        }

        function update() {
            // Smooth cursor/gyro lerp
            currentX += (targetX - currentX) * 0.06;
            currentY += (targetY - currentY) * 0.06;

            const offsetX = (currentX - 0.5) * 2;
            const offsetY = (currentY - 0.5) * 2;

            // Texture movement
            noise.style.transform = `translate(${offsetX * TEXTURE_MOVE * 0.3}px, ${offsetY * TEXTURE_MOVE * 0.3}px)`;
            wash.style.transform = `translate(${offsetX * TEXTURE_MOVE}px, ${offsetY * TEXTURE_MOVE}px)`;

            // Scroll values
            const scrollY = window.scrollY;
            const vh = window.innerHeight;

            // Photo parallax and fade
            const photoParallax = scrollY * 0.4;
            const photoX = offsetX * PHOTO_MOVE;
            const photoY = offsetY * PHOTO_MOVE - photoParallax;
            
            const fadeStart = vh * 0.3;
            const fadeEnd = vh * 1.2;
            const fadeProgress = Math.max(0, Math.min(1, (scrollY - fadeStart) / (fadeEnd - fadeStart)));
            const photoOpacity = 1 - fadeProgress;
            const photoScale = 1 - (fadeProgress * 0.1);

            photoLayer.style.transform = `translate(${photoX}px, ${photoY}px) scale(${photoScale})`;
            photoLayer.style.opacity = photoOpacity;

            // Scroll hint fade
            const hintFade = Math.max(0, 1 - (scrollY / (vh * 0.2)));
            scrollHint.style.opacity = hintFade * 0.4;

            // === NAME ANIMATION ===
            let nameProgress = 0;
            
            if (scrollY <= SCROLL_PHASE1_END) {
                // Phase 1: Name stays centered, just rises slightly with scroll
                nameProgress = 0;
            } else if (scrollY <= SCROLL_PHASE2_END) {
                // Phase 2: Name transitions from center to nav
                nameProgress = (scrollY - SCROLL_PHASE1_END) / (SCROLL_PHASE2_END - SCROLL_PHASE1_END);
                nameProgress = easeOutCubic(nameProgress);
            } else {
                // Phase 3: Locked
                nameProgress = 1;
            }

            // Calculate name properties
            const nameSize = lerp(NAME_START_SIZE, NAME_END_SIZE, nameProgress);
            const nameX = lerp(NAME_START_X, NAME_END_X, nameProgress);
            const nameY = lerp(NAME_START_Y - Math.min(scrollY * 0.5, vh * 0.35), NAME_END_Y, nameProgress);

            // Apply styles
            name.style.fontSize = `${nameSize}px`;
            name.style.left = `${nameX}px`;
            name.style.top = `${nameY}px`;
            
            // Adjust transform based on progress
            const translateX = lerp(-50, 0, nameProgress);
            const translateY = lerp(-50, 0, nameProgress);
            name.style.transform = `translate(${translateX}%, ${translateY}%)`;

            // Lock class for removing text shadow when in nav
            if (nameProgress >= 0.95) {
                name.classList.add('locked');
            } else {
                name.classList.remove('locked');
            }

            // Nav links visibility
            if (scrollY > vh * 1.2) {
                navLinks.classList.add('visible');
            } else {
                navLinks.classList.remove('visible');
            }

            requestAnimationFrame(update);
        }
        update();

        // Recalculate on resize
        window.addEventListener('resize', () => {
            // Update constants
            window.NAME_START_SIZE = Math.min(64, window.innerWidth * 0.08);
            window.NAME_START_Y = window.innerHeight * 0.5;
            window.NAME_START_X = window.innerWidth * 0.5;
        });

        // Mouse (desktop)
        document.addEventListener('mousemove', (e) => {
            targetX = e.clientX / window.innerWidth;
            targetY = e.clientY / window.innerHeight;
        });

        // Gyroscope
        function handleOrientation(e) {
            const beta = e.beta || 0;
            const gamma = e.gamma || 0;
            targetX = Math.max(0, Math.min(1, 0.5 + (gamma / 40)));
            targetY = Math.max(0, Math.min(1, 0.5 + ((beta - 40) / 40)));
        }

        function requestGyro() {
            if (gyroRequested) return;
            gyroRequested = true;

            if (typeof DeviceOrientationEvent !== 'undefined' &&
                typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permission => {
                        if (permission === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                            gyroEnabled = true;
                        }
                    })
                    .catch(() => {});
            } else if ('DeviceOrientationEvent' in window) {
                window.addEventListener('deviceorientation', handleOrientation);
                gyroEnabled = true;
            }
        }

        if (isMobile) {
            document.addEventListener('touchstart', requestGyro, { once: true });
        }

        // Touch fallback
        document.addEventListener('touchmove', (e) => {
            if (gyroEnabled) return;
            const touch = e.touches[0];
            targetX = touch.clientX / window.innerWidth;
            targetY = touch.clientY / window.innerHeight;
        }, { passive: true });

        document.addEventListener('touchend', () => {
            if (gyroEnabled) return;
            targetX = 0.5;
            targetY = 0.5;
        }, { passive: true });

        // Spec panel
        specToggle.addEventListener('click', () => {
            specPanel.classList.toggle('open');
            specToggle.textContent = specPanel.classList.contains('open') ? '×' : '?';
        });
    </script>
</body>
</html>
