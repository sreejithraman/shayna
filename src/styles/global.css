/*
 * DESIGN TOKENS
 *
 * Token locations:
 * - Colors, z-index, CSS vars: this file (global.css)
 * - Tailwind utilities, shadows, fonts: tailwind.config.mjs
 * - Effect parameters, content: src/config/site.ts
 */

/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500&family=Unbounded:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Colors (dark blue-black to harmonize with photo) */
  --bg-void: #0a0c14;
  --bg-subtle: #0e101a;
  --bg-elevated: #131520;
  --text-primary: #f5f5f5;
  --text-secondary: #999999;
  --text-muted: #555555;
  --accent-indigo: #6366f1;
  --accent-purple: #8b5cf6;
  --glow-color: var(--accent-purple);

  /* Z-index scale */
  --z-base: 0;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-fixed: 300;
  --z-modal-backdrop: 400;
  --z-modal: 500;
  --z-popover: 600;
  --z-tooltip: 700;
  --z-overlay: 9999;

  /* Effect defaults (overridden by config) */
  --hero-ratio: 40%;
}

html {
  background-color: var(--bg-void);
  color: var(--text-primary);
}

/* Smooth scroll handled by Lenis */
html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   Dramatic Reveal - Initial States
   Prevents flash of styled content before JS
   ============================================ */

[data-reveal] {
  opacity: 0;
  transform: translateY(100px) scale(0.85);
  will-change: transform, opacity;
}

[data-reveal-blur] {
  filter: blur(8px);
  will-change: filter;
}

[data-reveal-parallax] {
  will-change: transform;
}

/* Reduced motion: show everything immediately */
@media (prefers-reduced-motion: reduce) {
  [data-reveal] {
    opacity: 1;
    transform: none;
  }

  [data-reveal-blur] {
    filter: none;
  }
}

/* View Transitions - Blur Fade Effect */
@keyframes blur-fade-in {
  from {
    opacity: 0;
    filter: blur(8px);
  }
  to {
    opacity: 1;
    filter: blur(0);
  }
}

@keyframes blur-fade-out {
  from {
    opacity: 1;
    filter: blur(0);
  }
  to {
    opacity: 0;
    filter: blur(8px);
  }
}

::view-transition-old(root) {
  animation: blur-fade-out 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

::view-transition-new(root) {
  animation: blur-fade-in 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Keep nav stable during transitions */
::view-transition-group(nav) {
  animation: none;
}

/* Fallback for browsers without View Transitions */
@supports not (view-transition-name: none) {
  main {
    transition: opacity 0.2s ease;
  }
}

/* ============================================
   Focus States - Accessibility
   ============================================ */

:focus-visible {
  outline: 2px solid var(--accent-indigo);
  outline-offset: 2px;
}

/* Nav links */
.nav-link:focus-visible {
  outline-offset: 4px;
}

/* Buttons and CTAs */
.donate-btn:focus-visible,
.contact-link:focus-visible,
.social-link:focus-visible {
  outline-offset: 4px;
  border-radius: 4px;
}

/* Work cards - inset focus for media */
.work-card__trigger:focus-visible {
  outline-offset: -2px;
}

/* Feed cards */
.feed-card:focus-visible {
  outline-offset: -2px;
}
